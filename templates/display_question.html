<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Ask, Mate!</title>
        <link rel="stylesheet"
              href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css"
              integrity="sha384-PsH8R72JQ3SOdhVi3uxftmaW6Vc51MKb0q5P2rRUpPvrszuE4W1povHYgTpBfshb"
              crossorigin="anonymous">
        <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='style.css') }}">
        <link href="https://fonts.googleapis.com/css?family=Arapey|Bellefair|Fascinate|Joti+One|Open+Sans+Condensed:300|Shrikhand" rel="stylesheet">

    </head>
    <body>
        <h1>Ask, Mate!</h1>
        <p><a href="/">Back</a></p>
        <h2>{{ question['title'] }}</h2>
        <div class="panel-under-header">
            <p class="first_panel">
            {{ question['submission_time'].strftime('%Y-%m-%d %H:%M:%S') }} {{ question['view_number'] }} views
            </p>
            <form action="/search_answer/{{ question_id }}" method="post" class="first_panel">
                <input type="text" id="st-search-input" class="st-search-input search-field" name="search_input" />
                <button type="submit" class="search-button">Search</button>
            </form>
        </div>
        <p>{{ question['message'] }}</p>
        {% for question_comment in question_comments %}
        <h5>Comments:</h5>
        <p class="comments">{{ question_comment.message }}</p>
        {% endfor %}
        <p><sub>Votes:{{ question['vote_number'] }}</sub></p>

        <div id="tags">
            {% for tag in question_tags %}
                <span class="badge badge-pill badge-primary">{{tag.name}}</span>
            {% endfor %}
        </div>

        <form id="button-form">
            <button type="submit" formaction="/display/{{question_id}}/up-vote" formmethod="post" class="btn btn-outline-success">Like</button>
            <button type="submit" formaction="/display/{{question_id}}/down-vote" formmethod="post" class="btn btn-outline-danger">Dislike</button>
            <button type="submit" formaction="/display/{{question_id}}/edit" formmethod="get" class="btn btn-warning">Edit question</button>
            <button type="submit" formaction="/question/{{question_id}}/new-tag" formmethod="get" class="btn btn-primary">Add new tag</button>
            <button type="submit" formaction="/display/{{question_id}}/delete" formmethod="get" class="btn btn-danger">Delete question</button>
            <button type="submit" formaction="/question/{{question_id}}/new-comment" formmethod="get" class="btn btn-danger">Add new comment</button>
        </form>

        {% block content %} {% endblock %}
        <p>
        <img id="display_pic" src="/{{ question['image'] }}"/>
        </p>
        <h2>Answers:</h2>
        <table id="answer_table">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Submission Time</th>
                    <th>Vote Number</th>
                    <th>Message</th>
                    <th>Image</th>
                </tr>
            </thead>
            <tbody>
            {% for dictionary in answers if question['id'] == dictionary['question_id'] %}
                <tr>
                    <td> {{ dictionary['id'] }}</td>
                    <td> {{ dictionary['submission_time'].strftime('%Y-%m-%d %H:%M:%S') }}</td>
                    <td> {{ dictionary['vote_number'] }}</td>
                    <td> {{ dictionary['message'] }}</td>
                    <td> {{ dictionary['image'] }}</td>
                    <form>
                        <td id="buttons">
                            <div class="side-buttons">
                                <div class="side-buttons-row">
                            <button type="submit" formaction="/display/{{question_id}}/{{ dictionary['id'] }}/up-vote" formmethod="post" class="btn btn-outline-success">Like</button>
                            <button type="submit" formaction="/display/{{question_id}}/{{ dictionary['id'] }}/down-vote" formmethod="post" class="btn btn-outline-danger">Dislike</button>
                                </div>
                                <div class="side-buttons-row">
                            <button type="submit" formaction="/display/{{question_id}}/{{ dictionary['id'] }}/edit" formmethod="get" class="btn btn-warning">Edit</button>
                            <button type="submit" formaction="/display/{{question_id}}/{{ dictionary['id'] }}/delete" formmethod="get" class="btn btn-danger">Delete</button>
                                </div>
                            <button type="submit" formaction="/display/{{question_id}}/{{ dictionary['id'] }}/add-comment" formmethod="get">Add comment</button></form></td>
                            </div>
                        </td>
                    </form>
                </tr>
                {% for list in answer_comments if list['answer_id'] == dictionary['id'] %}
                <tr class="comments">
                    <td colspan="5"  class="comments">{{ list['message'] }}</td>
                </tr>
                {% endfor %}
            {% endfor %}
            </tbody>
        </table>
        <p><a href="/post_answer/{{ question_id }}">Answer this question</a></p>
    </body>
</html>